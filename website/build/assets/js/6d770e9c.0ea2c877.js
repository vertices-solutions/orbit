"use strict";(self.webpackChunkorbit_docs=self.webpackChunkorbit_docs||[]).push([[9062],{9870(e,t,r){r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"intro","title":"Introduction","description":"Orbit is a local-first interface for working with Slurm clusters over SSH.","source":"@site/versioned_docs/version-0.14.0/intro.md","sourceDirName":".","slug":"/","permalink":"/","draft":false,"unlisted":false,"editUrl":"https://github.com/vertices-solutions/orbit/tree/main/website/versioned_docs/version-0.14.0/intro.md","tags":[],"version":"0.14.0","frontMatter":{"title":"Introduction","description":"Orbit is a local-first interface for working with Slurm clusters over SSH.","slug":"/"},"sidebar":"docsSidebar","next":{"title":"Quickstart","permalink":"/quickstart"}}');var o=r(4848),n=r(8453);const s={title:"Introduction",description:"Orbit is a local-first interface for working with Slurm clusters over SSH.",slug:"/"},l=void 0,a={},c=[{value:"Learn more",id:"learn-more",level:2},{value:"Main concepts",id:"main-concepts",level:2},{value:"1. Install Orbit",id:"1-install-orbit",level:2},{value:"2. Add your first cluster",id:"2-add-your-first-cluster",level:2},{value:"3. Submit your first job",id:"3-submit-your-first-job",level:2},{value:"4. Initialize your first project",id:"4-initialize-your-first-project",level:2},{value:"5. Build and submit your first project",id:"5-build-and-submit-your-first-project",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"orbit"})," is a local-first interface for Slurm."]}),"\n",(0,o.jsx)(t.p,{children:"It is designed for a development workflow where code and data preparation stay on your machine, while compute runs remotely on an HPC cluster. Instead of switching into a remote-only workflow, you can manage submit, monitoring, logs, and result retrieval directly from a local CLI. Practically, it is designed to move all your HPC workflow to your local machine"}),"\n",(0,o.jsx)(t.h2,{id:"learn-more",children:"Learn more"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsxs)(t.strong,{children:["Jump to ",(0,o.jsx)(t.a,{href:"/quickstart",children:"Quickstart"})]})," to see what orbit feels like yourself"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Continue reading"})," this document to get a deeper understanding of how Orbit works."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsxs)(t.strong,{children:["Learn about ",(0,o.jsx)(t.a,{href:"/orbitfile",children:"Orbitfile"})]})," to make most use of Orbit."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"main-concepts",children:"Main concepts"}),"\n",(0,o.jsxs)(t.p,{children:["Orbit's primary goal is making remote clusters feel like they are just local resources on your machine. For Orbit, ",(0,o.jsx)(t.strong,{children:"Cluster"})," is any remote server with Slurm on it (Slurm is the most popular workload scheduler - software that enables scheduling computing workloads on a single server or on a large interconnected fleet of servers). Through Orbit, you can do computing on clusters in two primary ways:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Submitting jobs"}),": with ",(0,o.jsx)(t.a,{href:"/cli/commands/job/orbit-job-submit",children:"orbit job submit"}),", you can write your code locally and then submit it to a remote cluster. Orbit will handle transferring files to a new directory on the cluster you point to, scheduling the job on the scheduling, and then will, on your request, ",(0,o.jsx)(t.a,{href:"/cli/commands/job/orbit-job-logs",children:"print the job's logs"}),", ",(0,o.jsx)(t.a,{href:"/cli/commands/job/orbit-job-get",children:"check job status"}),", ",(0,o.jsx)(t.a,{href:"/cli/commands/job/orbit-job-retrieve",children:"retrieve job results"}),", or ",(0,o.jsx)(t.a,{href:"/cli/commands/job/orbit-job-list",children:"list all your running jobs"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.strong,{children:"Submitting projects"}),": projects is a distinct feature that allows you to reproduce your analysis with maybe varying parameters. You can ",(0,o.jsx)(t.a,{href:"/cli/commands/project/orbit-project-init",children:"initialize a project"})," (that will initialize the Orbit-specific file, Orbitfile, in a directory)"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"To enable all that, Orbit consists of two main components that are both installed together with Homebrew and run locally on your machine:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"orbit"}),": CLI interface for everything described above."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"orbitd"}),": the local daemon that performs cluster operations. It runs in the background and does all the heavy-lifting and maintenance such as persisting connections to servers so that you don't need to reconnect to them all the time."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"The next few paragraphs will give you a detailed explanation of how"}),"\n",(0,o.jsx)(t.h2,{id:"1-install-orbit",children:"1. Install Orbit"}),"\n",(0,o.jsxs)(t.p,{children:["The most convenient and error-prone way to install Orbit is through ",(0,o.jsx)(t.a,{href:"https://brew.sh",children:"Homebrew"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"brew install vertices-solutions/orbit/orbit\nbrew services start orbit\n"})}),"\n",(0,o.jsx)(t.p,{children:"To check that orbit is installed and ready to run:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"orbit ping\n"})}),"\n",(0,o.jsx)(t.h2,{id:"2-add-your-first-cluster",children:"2. Add your first cluster"}),"\n",(0,o.jsxs)(t.p,{children:["Now let's add your cluster to orbit's internal registry.\nIt will stay local on your machine.\nFor example, if you're usually connecting to your cluster at ",(0,o.jsx)(t.a,{href:"mailto:user@example.com",children:"user@example.com"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"orbit cluster add user@example.com\n"})}),"\n",(0,o.jsx)(t.p,{children:"You will be prompted for a short name for your cluster and other details."}),"\n",(0,o.jsx)(t.h2,{id:"3-submit-your-first-job",children:"3. Submit your first job"}),"\n",(0,o.jsx)(t.p,{children:"You want to submit a job when you just have some local code that you want to be run on your cluster. This is where you will be starting in most of cases: you just have a folder with scripts/pipelines/compiled code and you want to run it on a remote cluster."}),"\n",(0,o.jsx)(t.p,{children:"Orbit assumes that you submit jobs from folders on your local machine.\nThose folders can be nested to any degree and can contain any amount of code that is specific for your computing needs. Orbit handles file syncing for you."}),"\n",(0,o.jsx)(t.p,{children:"Create a minimal local job folder:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"mkdir -p ~/orbit-quickstart\ncd ~/orbit-quickstart\n\ncat > submit.sbatch <<'SBATCH'\n#!/bin/bash\n#SBATCH --job-name=orbit-quickstart\n#SBATCH --output=results/hello.out\n\nmkdir -p results\necho \"hello from $(hostname)\" > results/hello.out\nSBATCH\n"})}),"\n",(0,o.jsx)(t.p,{children:'The code above will create the smallest "hello world" project one can imagine: the sbatch script that you make with it writes its output to results/hello.out and prints "Hello from (work node hostname)" to stdout.'}),"\n",(0,o.jsxs)(t.p,{children:["If your cluster requires extra Slurm directives (for example partition/account), add them to ",(0,o.jsx)(t.code,{children:"submit.sbatch"})," script."]}),"\n",(0,o.jsx)(t.p,{children:"Now, you are ready to submit your job to cluster:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"orbit job submit --to cluster-name . # note: record job-id from this step\norbit job list\norbit job get <job id>\norbit job retrieve <job id> results --output ./out\n"})}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsx)(t.p,{children:"Some Slurm clusters require partition and account to be specified; if that's the case - you will see errors in the log."})}),"\n",(0,o.jsx)(t.h2,{id:"4-initialize-your-first-project",children:"4. Initialize your first project"}),"\n",(0,o.jsx)(t.p,{children:"In the same directory:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"orbit project init . --name orbit_quickstart\n"})}),"\n",(0,o.jsxs)(t.p,{children:["This creates an ",(0,o.jsx)(t.code,{children:"Orbitfile"})," and sets the project name."]}),"\n",(0,o.jsx)(t.h2,{id:"5-build-and-submit-your-first-project",children:"5. Build and submit your first project"}),"\n",(0,o.jsx)(t.p,{children:"When you build a project, Orbit:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"checks that Orbitfile is correct and parses it"}),"\n",(0,o.jsx)(t.li,{children:"saves the project directory in internal representation (a compressed tarball)"}),"\n",(0,o.jsx)(t.li,{children:'Automatically versions your analysis code with date-derived version + a pseudotag "latest" so that you can always easily submit your latest version for a project:'}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"orbit project build .\norbit project list # will show your project with a version\norbit project submit orbit_quickstart:latest --to <cluster-name>\n"})}),"\n",(0,o.jsxs)(t.p,{children:["After you make local changes to your project, and you're ready to make a new version - run ",(0,o.jsx)(t.code,{children:"orbit project build <path>"})," again: that will create a new version for that project.\nProject is identified by its name in Orbitfile: if you change the name with Orbitfile - new builds will be associated with a new project."]})]})}function u(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,t,r){r.d(t,{R:()=>s,x:()=>l});var i=r(6540);const o={},n=i.createContext(o);function s(e){const t=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);